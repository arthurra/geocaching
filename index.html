<html>
  <head>
    <title>
      Compass
    </title>
    <link href='css/style.css' rel='stylesheet'>
    <link href='js/toggles-ck.js' rel='javascript'>
    <!-- %link{:href => "css/icons.css", :rel => "stylesheet"} -->
    <link href='http://netdna.bootstrapcdn.com/font-awesome/3.0/css/font-awesome.css' rel='stylesheet'>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
    <script src='https://maps.googleapis.com/maps/api/js?key=AIzaSyCf1oFgc6RXllTWFTc2gWZJazqkP2IoCQg&amp;sensor=true'></script>
    <script>
      $(document).ready(function() {
      
        $('div.new-post-btn').click(function() {
          $('div.compass-container').toggleClass('open');
        });
      
        $('div.back-btn').click(function() {
          $('div.compass-container').toggleClass('open');
        });
        
      });
      
      var map;
      
      function initialize() {
        var mapOptions = {
          zoom: 15,
          disableDefaultUI: true,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
      
        
        var startMarker = {
          path: google.maps.SymbolPath.CIRCLE,
          fillColor: "#7ca2ce",
          fillOpacity: 1,
          scale: 4,
          strokeColor: "transparent"
        };
      
        var startMarkerHalo = {
          path: google.maps.SymbolPath.CIRCLE,
          fillColor: "white",
          fillOpacity: 0,
          scale: 0.75,
          strokeColor: "#a5bfdd",
          strokeWeight: 12
        };
      
        var locMarker = {
          path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
          fillColor: "#7ca2ce",
          fillOpacity: 1,
          scale: 5,
          strokeColor: "transparent",
          strokeWeight: 5
        };
      
      
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
      
        // Try HTML5 geolocation
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                             position.coords.longitude);
      
      
            var marker = new google.maps.Marker({
              position: pos,
              icon: locMarker,
              map: map
            });
      
            var markerStart = new google.maps.Marker({
              position: pos,
              icon: startMarker,
              map: map
            });
      
            var markerStartHalo = new google.maps.Marker({
              position: pos,
              icon: startMarkerHalo,
              map: map
            });
      
            map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });
        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
      }
      
      function handleNoGeolocation(errorFlag) {
        if (errorFlag) {
          var content = 'Error: The Geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }
      
        var options = {
          map: map,
          position: new google.maps.LatLng(60, 105),
          content: content
        };
      
        map.setCenter(options.position);
      }
      
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id='map-canvas'></div>
    <div class='header'>
      <div class='cache-info'>
        <h1>Peppi's Cache</h1>
        <div class='cache-type'></div>
        <div class='difficulty'>
          <div class='icon-cache green'></div>
          <i class='icon-star'></i>
          <i class='icon-star'></i>
          <i class='icon-star-empty'></i>
        </div>
        <div class='distance'>
          <div class='icon-direction'></div>
          <h2>1.1mi</h2>
        </div>
      </div>
      <div class='menu-btn'>
        <i class='icon-reorder'></i>
      </div>
    </div>
    <div class='mini-map'></div>
    <div class='magic-arrow'>
      <div class='menu-container'>
        <div class='dividers'>
          <table>
            <tr>
              <td>
                <div class='sub-btn photo'>
                  <i class='icon-camera-retro'></i>
                  <h2>Photo</h2>
                </div>
              </td>
              <td>
                <div class='sub-btn text'>
                  <i class='icon-comment'></i>
                  <h2>Text</h2>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class='sub-btn guide'>
                  <i class='icon-book'></i>
                  <h2>Guide</h2>
                </div>
              </td>
              <td>
                <div class='sub-btn video'>
                  <i class='icon-facetime-video'></i>
                  <h2>Video</h2>
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div class='back'>
          <div class='bezel-shadow'></div>
          <div class='bezel-highlight'></div>
          <div class='cap'></div>
          <div class='back-btn'>
            <!-- /%i.icon-back -->
            <i class='icon-reply'></i>
          </div>
        </div>
      </div>
      <div class='compass-container'>
        <div class='directions'></div>
        <div class='arrow'>
          <div class='shadow'></div>
          <div class='pointer'></div>
          <div class='chizle'></div>
          <div class='cap'></div>
        </div>
        <div class='new-post-btn'>
          <!-- %i.icon-new-post -->
          <i class='icon-pencil'></i>
        </div>
      </div>
    </div>
  </body>
</html>
